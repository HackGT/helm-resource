platform: linux

image_resource:
  type: docker-image
  source:
    repository: liuchong/rustup
    tag: 'beta-musl'

inputs:
- name: helm-resource

outputs:
- name: build-output

params:
  CARGO_TARGET_DIR: ../build-output

run:
  path: cargo
  dir: helm-resource
  args:
    - build
    - --release
    - --target=x86_64-unknown-linux-musl
